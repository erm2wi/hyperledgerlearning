---
- name: Install docker
  hosts: all
  become: yes
  tasks:
    - name: install yum-utils
      yum: name=yum-utils state=present
    - name: setup docker stable repository
      yum_repository:
        name: docker-ce
        description: setup docker-ce repo
        baseurl: https://yum.dockerproject.org/repo/main/centos/7/
    - name: install docker-ce
      yum: name=docker-ce state=present update_cache=yes
    - name: start docker service
      systemd: state=started name=docker
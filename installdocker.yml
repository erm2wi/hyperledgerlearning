---
- name: Install docker
  hosts: all
  become: yes
  tasks:
    - name: install yum-utils
      yum: name=yum-utils state=present
    - name: setup docker stable repository
      yum_repository:
        name: docker-ce
        description: setup docker-ce repo
        baseurl=https://download.docker.com/linux/centos/7/$basearch/stable
        enabled=yes
        gpgcheck=yes
        gpgkey=https://download.docker.com/linux/centos/gpg
    - name: install docker-ce
      yum: name=docker-ce state=present update_cache=yes
    - name: start docker service
      systemd: state=started name=docker